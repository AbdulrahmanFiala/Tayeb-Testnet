name: DCA Executor

on:
  schedule:
    - cron: '*/1 * * * *'
  workflow_dispatch:

jobs:
  execute-orders:
    runs-on: ubuntu-latest
    env:
      PRIVATE_KEY: ${{ secrets.PRIVATE_KEY }}
      MOONBASE_RPC_URL: https://rpc.api.moonbase.moonbeam.network

    steps:
      - uses: actions/checkout@v3

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 18

      - name: Install dependencies
        run: npm ci

      - name: Execute ready DCA orders
        run: npx hardhat run scripts/execute-ready-orders.ts --network moonbase

